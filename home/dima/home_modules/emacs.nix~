{ pkgs, config, ... }:

let
  myEmacsConfig = ./init.el;
in
{
  programs.emacs = {
    enable = true;
    extraConfig = builtins.readFile myEmacsConfig;
    package = pkgs.emacs.pkgs.withPackages (ep: with ep; [
      use-package
      gptel
      gruber-darker-theme
      projectile
      dashboard
      company
      ivy
      ivy-rich
      yasnippet
      lsp-ui
      counsel
      ivy-prescient
      magit
      forge
      org
      org-roam
      lsp-mode      
      nix-mode
      go-mode
      haskell-mode
    ]);
  };
}
